{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taru/FindMyProf/pehnava-ai/app/utils/logout.ts"],"sourcesContent":["export function logoutUser() {\r\n  localStorage.removeItem(\"accessToken\");\r\n  localStorage.removeItem(\"refreshToken\");\r\n  localStorage.removeItem(\"user\");\r\n  window.location.href = \"/login\";\r\n}\r\n"],"names":[],"mappings":";;;;AAAO,SAAS;IACd,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;AACzB","debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taru/FindMyProf/pehnava-ai/config/apiDomain.ts"],"sourcesContent":["export const API_BASE_URL = \"https://pehenava-backend.vercel.app\";    "],"names":[],"mappings":";;;;AAAO,MAAM,eAAe","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taru/FindMyProf/pehnava-ai/app/api/postsApi.ts"],"sourcesContent":["import { API_BASE_URL } from \"@/config/apiDomain\";\r\n\r\n\r\nexport async function getAllPosts(token: string) {\r\n  const res = await fetch(`${API_BASE_URL}/api/posts`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message);\r\n\r\n  return data;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,eAAe,YAAY,KAAa;IAC7C,MAAM,MAAM,MAAM,MAAM,GAAG,mIAAY,CAAC,UAAU,CAAC,EAAE;QACnD,QAAQ;QACR,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,OAAO;IAEzC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taru/FindMyProf/pehnava-ai/app/home/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { logoutUser } from \"../utils/logout\";\r\nimport { API_BASE_URL } from \"@/config/apiDomain\";\r\nimport { getAllPosts } from \"../api/postsApi\";\r\n\r\nexport default function HomeFeed() {\r\n  const [user, setUser] = useState<any>(null);\r\n  const [role, setRole] = useState<string>(\"\");\r\n  const [posts, setPosts] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // ========= RUN ON CLIENT ONLY =========\r\n  useEffect(() => {\r\n    const userString = localStorage.getItem(\"user\");\r\n    const token = localStorage.getItem(\"accessToken\");\r\n\r\n    if (!userString || !token) {\r\n      window.location.href = \"/login\";\r\n      return;\r\n    }\r\n\r\n    const parsedUser = JSON.parse(userString);\r\n    setUser(parsedUser);\r\n    setRole(parsedUser.role); // directly using backend role\r\n\r\n    fetchPosts(token);\r\n  }, []);\r\n\r\n  // ========= LOAD POSTS =========\r\n  async function fetchPosts(token: string) {\r\n    try {\r\n      const data = await getAllPosts(token);\r\n      setPosts(data.posts);\r\n    } catch (err: any) {\r\n      alert(err.message);\r\n      logoutUser();\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  if (loading || !user) {\r\n    return <div className=\"p-8 text-center text-xl\">Loading...</div>;\r\n  }\r\n\r\n  // ========= PERMISSIONS BASED ON BACKEND ROLE =========\r\n  const canShare = role === \"Influencer\" || role === \"Recommender\";\r\n  const canLike = role !== \"Recommender\";\r\n  const canComment = role !== \"Recommender\";\r\n\r\n  // ======= LIKE FEATURE =======\r\n  function handleLike(postId: string) {\r\n    if (!canLike) return;\r\n    setPosts((prev) =>\r\n      prev.map((p) =>\r\n        p.postId === postId ? { ...p, likesCount: p.likesCount + 1 } : p\r\n      )\r\n    );\r\n  }\r\n\r\n  // ======= COMMENT FEATURE =======\r\n  function addComment(postId: string, text: string) {\r\n    if (!text.trim()) return;\r\n    if (!canComment) return;\r\n\r\n    setPosts((prev) =>\r\n      prev.map((p) =>\r\n        p.postId === postId\r\n          ? {\r\n              ...p,\r\n              feedbacks: [\r\n                ...(p.feedbacks || []),\r\n                {\r\n                  id: Date.now().toString(),\r\n                  userName: user.Name,\r\n                  comment: text,\r\n                },\r\n              ],\r\n            }\r\n          : p\r\n      )\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className=\"p-8 text-center text-xl\">Loading posts...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#F5F5F4] font-[Inter] px-4 py-6 relative\">\r\n      {/* Header */}\r\n      <header className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-[#1F1F1F]\">Pehnava Feed</h1>\r\n\r\n        <button\r\n          onClick={logoutUser}\r\n          className=\"px-4 py-2 bg-[#111827] text-white rounded-lg hover:bg-black transition-all\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </header>\r\n\r\n      {/* Posts */}\r\n      <div className=\"flex flex-col gap-8 max-w-xl mx-auto pb-24\">\r\n        {posts.map((p) => {\r\n          const isMarketingPost = p.creator.role === \"Recommender\";\r\n\r\n          return (\r\n            <div\r\n              key={p.postId}\r\n              className=\"bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-xl transition-all\"\r\n            >\r\n              {/* Image */}\r\n              <div className=\"relative w-full h-[360px]\">\r\n                {p.photo ? (\r\n                  <Image\r\n                    src={`${API_BASE_URL}/${p.photo}`}\r\n                    fill\r\n                    alt=\"Post\"\r\n                    className=\"object-cover\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"bg-gray-300 w-full h-full flex items-center justify-center\">\r\n                    <span className=\"text-gray-600\">No Image</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"p-5 flex flex-col\">\r\n                {/* Creator */}\r\n                <div className=\"flex items-center gap-3 mb-4\">\r\n                  <div className=\"w-12 h-12 bg-[#E8E5E1] rounded-full flex items-center justify-center text-xl font-bold\">\r\n                    {p.creator.Name.charAt(0)}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <p className=\"font-semibold text-[#111827]\">\r\n                      {p.creator.Name}\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {isMarketingPost ? \"Sponsored\" : p.creator.role}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <h2 className=\"text-xl font-bold\">{p.name}</h2>\r\n                <p className=\"text-sm text-gray-700 mt-1\">{p.description}</p>\r\n\r\n                {/* Like + Share */}\r\n                <div className=\"flex justify-between mt-4\">\r\n                  {canLike && !isMarketingPost ? (\r\n                    <button\r\n                      onClick={() => handleLike(p.postId)}\r\n                      className=\"text-[#A27B5C] font-semibold\"\r\n                    >\r\n                      ðŸ¤Ž Like\r\n                    </button>\r\n                  ) : (\r\n                    <span className=\"text-gray-400 text-sm\">\r\n                      Likes Disabled\r\n                    </span>\r\n                  )}\r\n\r\n                  <span className=\"text-sm text-gray-600\">\r\n                    {p.likesCount} Likes\r\n                  </span>\r\n\r\n                  {canShare && (\r\n                    <button\r\n                      className=\"text-[#A27B5C] underline\"\r\n                      onClick={() => alert(\"Share coming soon\")}\r\n                    >\r\n                      Share\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Comments */}\r\n                {canComment && !isMarketingPost && (\r\n                  <div className=\"mt-5\">\r\n                    <p className=\"font-semibold\">Comments:</p>\r\n\r\n                    <div className=\"mt-2 space-y-2 max-h-32 overflow-y-auto\">\r\n                      {(p.feedbacks || []).map((f: any) => (\r\n                        <div\r\n                          key={f.id}\r\n                          className=\"bg-[#F7EDE2] p-2 rounded-lg text-sm\"\r\n                        >\r\n                          <strong>{f.userName}: </strong>\r\n                          {f.comment}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2 mt-3\">\r\n                      <input\r\n                        type=\"text\"\r\n                        placeholder=\"Add a commentâ€¦\"\r\n                        className=\"flex-1 px-3 py-2 border rounded-lg text-sm\"\r\n                        onKeyDown={(e) => {\r\n                          if (e.key === \"Enter\") {\r\n                            addComment(p.postId, e.currentTarget.value);\r\n                            e.currentTarget.value = \"\";\r\n                          }\r\n                        }}\r\n                      />\r\n                      <button className=\"px-3 py-2 bg-[#111827] text-white rounded-lg\">\r\n                        Post\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Floating Create Post */}\r\n      {role !== \"Marketing\" && (\r\n        <Link\r\n          href=\"/create-post\"\r\n          className=\"fixed bottom-6 right-6 bg-[#A27B5C] text-white px-6 py-4 rounded-full shadow-xl hover:bg-[#926B4B]\"\r\n        >\r\n          + Create Post\r\n        </Link>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}