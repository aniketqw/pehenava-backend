{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taru/FindMyProf/find-my-prof/app/professor/register/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function Register() {\r\n  const router = useRouter();\r\n\r\n  // ---------------------\r\n  // FORM STATE\r\n  // ---------------------\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    department: \"\",\r\n    bio: \"\",\r\n    specialization: \"\",\r\n    password: \"\",\r\n    email: \"\",\r\n    otp: \"\",\r\n  });\r\n\r\n  // ---------------------\r\n  // UI STATES\r\n  // ---------------------\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [sendLoading, setSendLoading] = useState(false);\r\n  const [verifyLoading, setVerifyLoading] = useState(false);\r\n\r\n  // ---------------------\r\n  // ALERT STATE\r\n  // ---------------------\r\n  const [alert, setAlert] = useState({\r\n    type: \"\",\r\n    message: \"\",\r\n    show: false,\r\n  });\r\n\r\n  const showAlert = (type: string, message: string | undefined) => {\r\n    setAlert({ type, message: message ?? \"\", show: true });\r\n\r\n    setTimeout(() => {\r\n      setAlert({ type: \"\", message: \"\", show: false });\r\n    }, 3000);\r\n  };\r\n\r\n  // ---------------------\r\n  // SUCCESS MODAL\r\n  // ---------------------\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n\r\n  // ---------------------\r\n  // HANDLERS\r\n  // ---------------------\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Save to localStorage\r\n  const saveProfessorToLocal = (prof: any) => {\r\n    const existing = JSON.parse(localStorage.getItem(\"professors\") || \"[]\");\r\n\r\n    if (existing.some((p: any) => p.email === prof.email)) {\r\n      return { ok: false, message: \"Email already registered!\" };\r\n    }\r\n\r\n    existing.push({ id: Date.now(), ...prof });\r\n    localStorage.setItem(\"professors\", JSON.stringify(existing));\r\n\r\n    return { ok: true };\r\n  };\r\n\r\n  // SEND OTP\r\n  const sendOtp = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSendLoading(true);\r\n\r\n    try {\r\n      await fetch(\"/api/send-otp\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email: form.email }),\r\n      });\r\n\r\n      setOtpSent(true);\r\n      showAlert(\"success\", \"OTP sent to your email!\");\r\n    } catch (error) {\r\n      showAlert(\"error\", \"Failed to send OTP\");\r\n    }\r\n\r\n    setSendLoading(false);\r\n  };\r\n\r\n  // VERIFY OTP + REGISTER\r\n  const verifyOtp = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setVerifyLoading(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/verify-otp\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email: form.email, otp: form.otp }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!data.success) {\r\n        showAlert(\"error\", \"Invalid OTP\");\r\n        setVerifyLoading(false);\r\n        return;\r\n      }\r\n\r\n      const result = saveProfessorToLocal({\r\n        name: form.name,\r\n        department: form.department,\r\n        email: form.email,\r\n        bio: form.bio,\r\n        password: form.password,\r\n        specialization: form.specialization,\r\n      });\r\n\r\n      if (!result.ok) {\r\n        showAlert(\"warning\", result.message);\r\n        setVerifyLoading(false);\r\n        return;\r\n      }\r\n\r\n      setShowSuccessModal(true);\r\n    } catch (error) {\r\n      showAlert(\"error\", \"Something went wrong\");\r\n    }\r\n\r\n    setVerifyLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-r from-indigo-50 to-blue-50 min-h-screen flex flex-col\">\r\n      <header className=\"bg-gradient-to-r from-indigo-600 to-blue-600 text-white text-center py-4 shadow-md\">\r\n        <h1 className=\"text-2xl font-bold\">ProfConnect - First Time Registration</h1>\r\n      </header>\r\n\r\n      <main className=\"flex-grow flex items-center justify-center p-6 relative\">\r\n\r\n        {/* ALERT BOX */}\r\n        <div className=\"absolute top-20 w-full max-w-md mx-auto\">\r\n          {alert.show && (\r\n            <div\r\n              className={`p-3 rounded-lg flex items-center gap-2 text-white shadow-md animate-fadeIn\r\n                ${\r\n                  alert.type === \"success\"\r\n                    ? \"bg-green-600\"\r\n                    : alert.type === \"error\"\r\n                    ? \"bg-red-600\"\r\n                    : \"bg-yellow-500\"\r\n                }\r\n              `}\r\n            >\r\n              {alert.type === \"success\" && <span className=\"text-xl\">✔️</span>}\r\n              {alert.type === \"error\" && <span className=\"text-xl\">❌</span>}\r\n              {alert.type === \"warning\" && <span className=\"text-xl\">⚠️</span>}\r\n              <p>{alert.message}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* SUCCESS MODAL */}\r\n        {showSuccessModal && (\r\n          <div className=\"fixed inset-0 flex items-center justify-center backdrop-blur-md bg-black/20 z-50\">\r\n            <div className=\"bg-white rounded-xl p-8 w-[90%] max-w-md text-center shadow-xl animate-fadeIn\">\r\n              <div className=\"flex justify-center mb-4\">\r\n                <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center\">\r\n                  <span className=\"text-green-600 text-5xl\">✔</span>\r\n                </div>\r\n              </div>\r\n\r\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">\r\n                Registration Successful!\r\n              </h2>\r\n\r\n              <p className=\"text-gray-600 mb-6\">\r\n                Your professor account has been created successfully. You can now log in.\r\n              </p>\r\n\r\n              <button\r\n                onClick={() => {\r\n                  setShowSuccessModal(false);\r\n                  router.push(\"/professor/login\");\r\n                }}\r\n                className=\"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700\"\r\n              >\r\n                Continue to Login\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* SCROLLABLE FORM CONTAINER */}\r\n        <div className=\"bg-white shadow-lg rounded-2xl p-8 w-full max-w-md h-[80vh] overflow-y-auto\">\r\n          <form\r\n            onSubmit={otpSent ? verifyOtp : sendOtp}\r\n            className=\"space-y-6\"\r\n          >\r\n            {/* Full Name */}\r\n            <div>\r\n              <label className=\"block font-medium mb-1 text-gray-700\">Full Name</label>\r\n              <input\r\n                name=\"name\"\r\n                type=\"text\"\r\n                value={form.name}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter full name\"\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Department */}\r\n            <div>\r\n              <label className=\"block font-medium mb-1 text-gray-700\">Department</label>\r\n              <input\r\n                name=\"department\"\r\n                type=\"text\"\r\n                value={form.department}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter department\"\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Bio */}\r\n            <div>\r\n              <label className=\"block font-medium mb-1 text-gray-700\">Bio</label>\r\n              <input\r\n                name=\"bio\"\r\n                type=\"text\"\r\n                value={form.bio}\r\n                onChange={handleChange}\r\n                placeholder=\"Short bio\"\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Specialization */}\r\n            <div>\r\n              <label className=\"block font-medium mb-1 text-gray-700\">Specialization</label>\r\n              <input\r\n                name=\"specialization\"\r\n                type=\"text\"\r\n                value={form.specialization}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter specialization\"\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label className=\"block font-medium mb-1 text-gray-700\">Password</label>\r\n              <input\r\n                name=\"password\"\r\n                type=\"password\"\r\n                value={form.password}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter password\"\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Email */}\r\n            <div>\r\n              <label className=\"block font-medium mb-1 text-gray-700\">Email</label>\r\n              <input\r\n                name=\"email\"\r\n                type=\"email\"\r\n                value={form.email}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter email\"\r\n                className=\"w-full border rounded-lg px-3 py-2\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Buttons */}\r\n            {!otpSent ? (\r\n              <button\r\n                type=\"submit\"\r\n                className=\"w-full bg-indigo-600 text-white py-2 rounded-lg\"\r\n              >\r\n                {sendLoading ? \"Sending...\" : \"Send OTP\"}\r\n              </button>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {/* OTP Input */}\r\n                <div>\r\n                  <label className=\"block font-medium mb-1 text-gray-700\">\r\n                    Enter OTP\r\n                  </label>\r\n                  <input\r\n                    name=\"otp\"\r\n                    type=\"text\"\r\n                    value={form.otp}\r\n                    onChange={handleChange}\r\n                    placeholder=\"Enter OTP received on email\"\r\n                    className=\"w-full border rounded-lg px-3 py-2\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Validate OTP */}\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"w-full bg-green-600 text-white py-2 rounded-lg\"\r\n                >\r\n                  {verifyLoading\r\n                    ? \"Validating...\"\r\n                    : \"Validate OTP & Complete Registration\"}\r\n                </button>\r\n\r\n                {/* Resend OTP */}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={sendOtp}\r\n                  className=\"w-full bg-indigo-500 text-white py-2 rounded-lg\"\r\n                >\r\n                  {sendLoading ? \"Sending… ⏳\" : \"Resend OTP\"}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/taru/FindMyProf/find-my-prof/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}